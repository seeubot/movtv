<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Media Manager</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #6c5ce7;
      --primary-dark: #5649c0;
      --secondary: #00cec9;
      --dark: #2d3436;
      --light: #f5f6fa;
      --gray: #636e72;
      --danger: #d63031;
      --success: #00b894;
      --warning: #fdcb6e;
      --bg-color: #1a1a2e;
      --card-bg-color: #16213e;
      --text-color: #f5f6fa;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      overflow-x: hidden;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    
    #app {
      display: flex;
      flex-direction: column;
      flex: 1;
    }
    
    /* Header Styles */
    header {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      padding: 1.5rem 2rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 10;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1400px;
      width: 100%;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .logo i {
      font-size: 1.75rem;
    }
    
    .logo h1 {
      font-size: 1.5rem;
      font-weight: 600;
    }
    
    .search-bar {
      flex-grow: 1;
      max-width: 500px;
      position: relative;
    }
    
    .search-bar input {
      width: 100%;
      padding: 0.75rem 1.25rem;
      border-radius: 50px;
      border: none;
      background-color: rgba(255, 255, 255, 0.9);
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    
    .search-bar input:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.3);
      background-color: white;
    }
    
    .search-bar i {
      position: absolute;
      right: 1.25rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
    }
    
    /* Hero Search Section */
    .hero-search-section {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 2rem;
      text-align: center;
    }
    
    .hero-search-section h2 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    
    .hero-search-section p {
      font-size: 1.25rem;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 2rem;
    }
    
    .hero-search-bar {
      max-width: 600px;
      width: 100%;
      position: relative;
    }
    
    .hero-search-bar input {
      width: 100%;
      padding: 1rem 1.5rem;
      border-radius: 50px;
      border: none;
      background-color: rgba(255, 255, 255, 0.9);
      font-size: 1.1rem;
      transition: all 0.3s ease;
    }
    
    .hero-search-bar input:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(108, 92, 231, 0.5);
      background-color: white;
    }
    
    .hero-search-bar i {
      position: absolute;
      right: 1.5rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
      font-size: 1.2rem;
    }
    
    /* Main Content Layout */
    .content {
      flex: 1;
      padding: 2rem;
      overflow-y: auto;
      background-color: var(--bg-color);
      display: none; /* Initially hidden */
    }
    
    .content.active {
      display: block; /* Shown when content is loaded */
    }
    
    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }
    
    .content-title {
      font-size: 1.75rem;
      font-weight: 600;
    }
    
    .view-toggle {
      display: flex;
      gap: 0.5rem;
    }
    
    .view-toggle button {
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      font-size: 1.25rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .view-toggle button.active {
      color: var(--primary);
    }
    
    .view-toggle button:hover {
      color: white;
    }
    
    /* Media Grid */
    .media-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 1.5rem;
    }
    
    .media-card {
      background: var(--card-bg-color);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      position: relative;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }
    
    .media-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }
    
    .media-thumbnail {
      position: relative;
      height: 0;
      padding-bottom: 150%;
      overflow: hidden;
    }
    
    .media-thumbnail img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    
    .media-card:hover .media-thumbnail img {
      transform: scale(1.05);
    }
    
    .media-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent 50%);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 1rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .media-card:hover .media-overlay {
      opacity: 1;
    }
    
    .media-info {
      padding: 1rem;
    }
    
    .media-title {
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: 0.25rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .media-meta {
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.6);
    }
    
    .media-type {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      background-color: var(--primary);
      color: white;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 500;
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
    }
    
    .play-button {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 50px;
      background-color: rgba(108, 92, 231, 0.8);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      opacity: 0;
      transition: all 0.3s ease;
      cursor: pointer;
      border: none;
    }
    
    .media-card:hover .play-button {
      opacity: 1;
    }
    
    /* Video Player Modal */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .video-modal {
      width: 100%;
      max-width: 100%;
      height: 100%;
      background-color: var(--bg-color);
      position: relative;
    }
    
    .close-modal {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: white;
      font-size: 2rem;
      cursor: pointer;
      z-index: 10;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .video-container {
      width: 100%;
      height: 100%;
      background-color: black;
      position: relative;
    }
    
    .video-player {
      width: 100%;
      height: 100%;
      border: none;
      object-fit: contain;
    }
    
    .video-info {
      position: absolute;
      top: 1rem;
      left: 1rem;
      z-index: 5;
    }
    
    .video-title {
      font-size: 1.5rem;
      font-weight: 600;
    }
    
    /* Video Controls */
    .video-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 5;
    }
    
    .video-container:hover .video-controls {
      opacity: 1;
    }
    
    .control-button {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }
    
    .progress-container {
      flex-grow: 1;
      height: 8px;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      position: relative;
      cursor: pointer;
    }
    
    .progress-bar {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background-color: var(--primary);
      border-radius: 4px;
    }
    
    .time-display {
      color: white;
      font-size: 0.9rem;
      min-width: 80px;
      text-align: center;
    }
    
    .volume-control {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .volume-slider {
      width: 80px;
      height: 4px;
      -webkit-appearance: none;
      appearance: none;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      outline: none;
    }
    
    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 12px;
      height: 12px;
      background: white;
      border-radius: 50%;
      cursor: pointer;
    }
    
    .fullscreen-button {
      margin-left: auto;
    }
    
    /* Series Details Modal */
    .series-modal {
      width: 90%;
      max-width: 1200px;
      max-height: 90vh;
      background-color: var(--card-bg-color);
      border-radius: 12px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    
    .series-header {
      display: flex;
      padding: 1.5rem;
      gap: 1.5rem;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    }
    
    .series-poster {
      width: 200px;
      height: 300px;
      border-radius: 8px;
      overflow: hidden;
      flex-shrink: 0;
    }
    
    .series-poster img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .series-info {
      flex-grow: 1;
    }
    
    .series-title {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    
    .series-meta {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
      color: rgba(255, 255, 255, 0.8);
    }
    
    .series-description {
      line-height: 1.6;
      margin-bottom: 1.5rem;
    }
    
    .play-series {
      background-color: var(--secondary);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .play-series:hover {
      background-color: #00b5b2;
      transform: translateY(-2px);
    }
    
    .series-content {
      display: flex;
      flex: 1;
      overflow: hidden;
    }
    
    .seasons-sidebar {
      width: 250px;
      border-right: 1px solid rgba(255, 255, 255, 0.1);
      overflow-y: auto;
      padding: 1rem 0;
    }
    
    .season-item {
      padding: 0.75rem 1.5rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .season-item:hover, .season-item.active {
      background-color: rgba(108, 92, 231, 0.2);
    }
    
    .season-item.active {
      border-left: 3px solid var(--primary);
    }
    
    .season-title {
      font-weight: 500;
      margin-bottom: 0.25rem;
    }
    
    .season-episodes {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.6);
    }
    
    .episodes-list {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    
    .episode-card {
      position: relative;
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .episode-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
    }
    
    .episode-thumbnail {
      width: 100%;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
      position: relative;
      overflow: hidden;
    }
    
    .episode-thumbnail img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .episode-card:hover .episode-thumbnail img {
        transform: scale(1.05);
    }
    
    .episode-info {
      padding: 1rem;
      position: relative;
    }
    
    .episode-title {
      font-weight: 500;
      font-size: 1rem;
      margin-bottom: 0.25rem;
      line-height: 1.4;
    }
    
    .episode-number {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      font-size: 0.85rem;
      font-weight: 600;
    }
    
    .episode-description {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
      margin-top: 0.5rem;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .play-episode {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 50px;
        height: 50px;
        background-color: rgba(108, 92, 231, 0.8);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.5rem;
        opacity: 0;
        transition: all 0.3s ease;
        cursor: pointer;
        border: none;
        z-index: 2;
    }

    .episode-card:hover .play-episode {
        opacity: 1;
    }
    
    /* Loading State */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 200px;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Empty State */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 3rem;
      color: rgba(255, 255, 255, 0.6);
    }
    
    .empty-state i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: var(--primary);
    }
    
    .empty-state h3 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      color: white;
    }
    
    /* Responsive Styles */
    @media (max-width: 992px) {
      .header-container {
        flex-direction: column;
        gap: 1rem;
      }
      
      .series-header {
        flex-direction: column;
      }
      
      .series-poster {
        width: 150px;
        height: 225px;
        margin: 0 auto;
      }
      
      .episodes-list {
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      }
    }
    
    @media (max-width: 768px) {
      .content {
        padding: 1rem;
      }
      
      .media-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 1rem;
      }
      
      .video-modal, .series-modal {
        width: 95%;
      }
      
      .series-content {
        flex-direction: column;
      }
      
      .seasons-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        overflow-x: auto;
        overflow-y: hidden;
        display: flex;
        padding: 0.5rem;
      }
      
      .season-item {
        white-space: nowrap;
        padding: 0.5rem 1rem;
      }
      
      .season-item.active {
        border-left: none;
        border-bottom: 3px solid var(--primary);
      }

      .episodes-list {
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 1rem;
      }
    }
    
    @media (max-width: 576px) {
      .media-grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      }
      
      .media-info {
        padding: 0.75rem;
      }
      
      .media-title {
        font-size: 0.9rem;
      }
      
      .media-meta {
        font-size: 0.75rem;
      }
      
      .video-info {
        padding: 1rem;
      }
      
      .video-title {
        font-size: 1.25rem;
      }

      .episodes-list {
        grid-template-columns: 1fr;
      }

      .episode-card .episode-info {
        padding-top: 3rem;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- Header with logo and search bar (visible after initial search) -->
    <header id="mainHeader">
      <div class="header-container">
        <div class="logo">
          <i class="fas fa-film"></i>
          <h1>Media Manager</h1>
        </div>
        <div class="search-bar">
          <input type="text" placeholder="Search movies and series..." id="mainSearchInput">
          <i class="fas fa-search"></i>
        </div>
      </div>
    </header>

    <!-- Initial hero search section (visible before initial search) -->
    <div id="heroSearchSection" class="hero-search-section">
      <div class="logo">
        <i class="fas fa-film fa-3x"></i>
        <h1>Media Manager</h1>
      </div>
      <h2>Discover Your Next Favorite Show</h2>
      <p>Search thousands of movies and series.</p>
      <div class="hero-search-bar">
        <input type="text" placeholder="Search..." id="heroSearchInput">
        <i class="fas fa-search"></i>
      </div>
    </div>
    
    <!-- Main content area for search results -->
    <main class="content" id="mediaContent">
      <div id="mediaContainer">
        <!-- Media content will be populated here -->
      </div>
    </main>
    
    <!-- Video Player Modal -->
    <div class="modal-overlay" id="videoModal">
      <div class="video-modal" id="videoModalContent">
        <button class="close-modal" id="closeVideoModal">
          <i class="fas fa-times"></i>
        </button>
        <div class="video-container">
          <div class="video-info">
            <h3 class="video-title" id="videoTitle"></h3>
          </div>
          <video class="video-player" id="videoPlayer" controls></video>
          <div class="video-controls">
            <button class="control-button" id="playPauseBtn">
              <i class="fas fa-play"></i>
            </button>
            <div class="progress-container" id="progressContainer">
              <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="time-display" id="timeDisplay">00:00 / 00:00</div>
            <div class="volume-control">
              <button class="control-button" id="muteBtn">
                <i class="fas fa-volume-up"></i>
              </button>
              <input type="range" min="0" max="1" step="0.01" value="1" class="volume-slider" id="volumeSlider">
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Series Details Modal -->
    <div class="modal-overlay" id="seriesModal">
      <div class="series-modal">
        <button class="close-modal" id="closeSeriesModal">
          <i class="fas fa-times"></i>
        </button>
        <div class="series-header">
          <div class="series-poster">
            <img src="" alt="Series Poster" id="seriesPoster">
          </div>
          <div class="series-info">
            <h2 class="series-title" id="seriesTitle">Series Title</h2>
            <div class="series-meta">
              <span id="seriesSeasons">0 Seasons</span>
              <span id="seriesEpisodes">0 Episodes</span>
            </div>
            <p class="series-description" id="seriesDescription">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in dui mauris.
            </p>
            <button class="play-series" id="playFirstEpisode">
              <i class="fas fa-play"></i>
              <span>Play First Episode</span>
            </button>
          </div>
        </div>
        <div class="series-content">
          <div class="seasons-sidebar" id="seasonsSidebar">
            <!-- Seasons will be populated here -->
          </div>
          <div class="episodes-list" id="episodesList">
            <!-- Episodes will be populated here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // API Configuration
    // In a real-world scenario, you would have a backend API. This is a mock URL.
    const API_BASE_URL = 'https://mock-api.com/media';
    
    // DOM Elements
    const mainHeader = document.getElementById('mainHeader');
    const mainSearchInput = document.getElementById('mainSearchInput');
    const heroSearchSection = document.getElementById('heroSearchSection');
    const heroSearchInput = document.getElementById('heroSearchInput');
    const mediaContent = document.getElementById('mediaContent');
    const mediaContainer = document.getElementById('mediaContainer');
    const contentTitle = document.getElementById('contentTitle');
    const viewToggleButtons = document.querySelectorAll('.view-toggle button');
    
    // Modal Elements
    const videoModal = document.getElementById('videoModal');
    const videoModalContent = document.getElementById('videoModalContent');
    const closeVideoModal = document.getElementById('closeVideoModal');
    const videoPlayer = document.getElementById('videoPlayer');
    const videoTitle = document.getElementById('videoTitle');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const progressContainer = document.getElementById('progressContainer');
    const progressBar = document.getElementById('progressBar');
    const timeDisplay = document.getElementById('timeDisplay');
    const muteBtn = document.getElementById('muteBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    
    const seriesModal = document.getElementById('seriesModal');
    const closeSeriesModal = document.getElementById('closeSeriesModal');
    const seriesTitle = document.getElementById('seriesTitle');
    const seriesPoster = document.getElementById('seriesPoster');
    const seriesSeasons = document.getElementById('seriesSeasons');
    const seriesEpisodes = document.getElementById('seriesEpisodes');
    const seriesDescription = document.getElementById('seriesDescription');
    const playFirstEpisode = document.getElementById('playFirstEpisode');
    const seasonsSidebar = document.getElementById('seasonsSidebar');
    const episodesList = document.getElementById('episodesList');
    
    // App State
    let currentSearchQuery = '';
    let mediaData = [];
    let currentSeries = null;
    let currentSeason = null;
    
    // Helper function to create a dummy video URL
    const getDummyVideoUrl = () => {
        const dummyVideoUrls = [
            'https://d1f2113f019b8893d9a1-77884813f568600d8b4e877e69c1ce81.ssl.cf2.rackcdn.com/10901237-7f9999a896d842d03b0d778d227f311c-1481541315-mobile.mp4',
            'https://d1f2113f019b8893d9a1-77884813f568600d8b4e877e69c1ce81.ssl.cf2.rackcdn.com/26456012-7f9999a896d842d03b0d778d227f311c-1481541285-mobile.mp4',
            'https://d1f2113f019b8893d9a1-77884813f568600d8b4e877e69c1ce81.ssl.cf2.rackcdn.com/26442654-7f9999a896d842d03b0d778d227f311c-1481541315-mobile.mp4'
        ];
        return dummyVideoUrls[Math.floor(Math.random() * dummyVideoUrls.length)];
    };

    // Initialize the app
    function init() {
      setupEventListeners();
    }
    
    // Set up event listeners
    function setupEventListeners() {
      // Listen for search input on both search bars
      [heroSearchInput, mainSearchInput].forEach(input => {
        input.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            currentSearchQuery = e.target.value.trim();
            if (currentSearchQuery) {
              loadMedia();
            }
          }
        });
      });
      
      // Close modals
      closeVideoModal.addEventListener('click', () => {
        videoModal.classList.remove('active');
        videoPlayer.pause();
        if (document.fullscreenElement) {
            document.exitFullscreen();
        }
      });
      
      closeSeriesModal.addEventListener('click', () => {
        seriesModal.classList.remove('active');
      });
      
      // Video player controls
      videoPlayer.addEventListener('play', () => {
        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
      });
      
      videoPlayer.addEventListener('pause', () => {
        playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
      });
      
      playPauseBtn.addEventListener('click', () => {
        if (videoPlayer.paused) {
          videoPlayer.play();
        } else {
          videoPlayer.pause();
        }
      });
      
      videoPlayer.addEventListener('timeupdate', updateProgress);
      
      progressContainer.addEventListener('click', (e) => {
        const rect = progressContainer.getBoundingClientRect();
        const pos = (e.clientX - rect.left) / rect.width;
        videoPlayer.currentTime = pos * videoPlayer.duration;
      });
      
      muteBtn.addEventListener('click', () => {
        videoPlayer.muted = !videoPlayer.muted;
        muteBtn.innerHTML = videoPlayer.muted 
          ? '<i class="fas fa-volume-mute"></i>' 
          : '<i class="fas fa-volume-up"></i>';
      });
      
      volumeSlider.addEventListener('input', (e) => {
        videoPlayer.volume = e.target.value;
        videoPlayer.muted = e.target.value === '0';
        muteBtn.innerHTML = videoPlayer.muted 
          ? '<i class="fas fa-volume-mute"></i>' 
          : '<i class="fas fa-volume-up"></i>';
      });
      
      // Play first episode button
      playFirstEpisode.addEventListener('click', () => {
        if (currentSeries && currentSeries.seasons.length > 0) {
          const firstSeason = currentSeries.seasons[0];
          if (firstSeason.episodes.length > 0) {
            const firstEpisode = firstSeason.episodes[0];
            playEpisode(firstEpisode, firstSeason.seasonNumber, currentSeries.name);
          }
        }
      });
      
      // Close modals when clicking outside
      document.addEventListener('click', (e) => {
        if (videoModal.classList.contains('active') && e.target === videoModal) {
          videoModal.classList.remove('active');
          videoPlayer.pause();
          if (document.fullscreenElement) {
              document.exitFullscreen();
          }
        }
        
        if (seriesModal.classList.contains('active') && e.target === seriesModal) {
          seriesModal.classList.remove('active');
        }
      });
    }
    
    // Update video progress bar
    function updateProgress() {
      const progress = (videoPlayer.currentTime / videoPlayer.duration) * 100;
      progressBar.style.width = `${progress}%`;
      
      const currentMinutes = Math.floor(videoPlayer.currentTime / 60);
      const currentSeconds = Math.floor(videoPlayer.currentTime % 60);
      const durationMinutes = Math.floor(videoPlayer.duration / 60);
      const durationSeconds = Math.floor(videoPlayer.duration % 60);
      
      timeDisplay.textContent = 
        `${currentMinutes.toString().padStart(2, '0')}:${currentSeconds.toString().padStart(2, '0')} / ` +
        `${durationMinutes.toString().padStart(2, '0')}:${durationSeconds.toString().padStart(2, '0')}`;
    }
    
    // Load media data
    async function loadMedia() {
      // Hide hero section and show main content
      heroSearchSection.style.display = 'none';
      mediaContent.classList.add('active');
      mainHeader.style.display = 'flex';
      mainSearchInput.value = currentSearchQuery;
      
      mediaContainer.innerHTML = `
        <div class="loading">
          <div class="spinner"></div>
        </div>
      `;
      
      // Mock API call to get media data
      try {
        const mockData = generateMockData(currentSearchQuery);
        mediaData = mockData;
        
        if (mediaData.length === 0) {
          showEmptyState();
        } else {
          renderMedia();
        }
      } catch (error) {
        console.error('Error loading media:', error);
        mediaContainer.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>Error Loading Content</h3>
            <p>Failed to fetch media. Please try again later.</p>
          </div>
        `;
      }
    }
    
    // Show empty state
    function showEmptyState() {
      mediaContainer.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-box-open"></i>
          <h3>No Content Found</h3>
          <p>No results for your search: "${currentSearchQuery}"</p>
        </div>
      `;
    }
    
    // Render media based on current view
    function renderMedia() {
      renderGridView();
    }
    
    // Render grid view (the only view in this version)
    function renderGridView() {
      let html = '<div class="media-grid">';
      
      mediaData.forEach(item => {
        const isSeries = item.seasons !== undefined;
        const type = isSeries ? 'Series' : 'Movie';
        const date = new Date().toLocaleDateString();
        
        html += `
          <div class="media-card" data-id="${item.id}" data-type="${isSeries ? 'series' : 'movie'}">
            <div class="media-thumbnail">
              <img src="${item.thumbnail}" alt="${item.name}">
              <span class="media-type">${type}</span>
              <div class="media-overlay">
                <button class="play-button">
                  <i class="fas fa-play"></i>
                </button>
              </div>
            </div>
            <div class="media-info">
              <h3 class="media-title">${item.name}</h3>
              <div class="media-meta">
                <span>${type}</span>
                <span>${date}</span>
              </div>
            </div>
          </div>
        `;
      });
      
      html += '</div>';
      mediaContainer.innerHTML = html;
      
      // Add event listeners to media cards
      document.querySelectorAll('.media-card').forEach(card => {
        card.addEventListener('click', (e) => {
          // Check if the click was on the play button
          if (e.target.closest('.play-button')) {
            e.stopPropagation();
            const id = card.dataset.id;
            const type = card.dataset.type;
            
            if (type === 'series') {
                const series = mediaData.find(item => item.id == id);
                if (series && series.seasons.length > 0 && series.seasons[0].episodes.length > 0) {
                    const firstEpisode = series.seasons[0].episodes[0];
                    playEpisode(firstEpisode, series.seasons[0].seasonNumber, series.name);
                }
            } else {
                const movie = mediaData.find(item => item.id == id);
                if (movie) {
                    playVideo(movie.name, movie.videoUrl, 'Movie');
                }
            }
          } else {
            const id = card.dataset.id;
            const type = card.dataset.type;
            
            if (type === 'series') {
              openSeriesModal(id);
            } else {
              openMovieModal(id);
            }
          }
        });
      });
    }
    
    // Open movie modal and play video
    function openMovieModal(id) {
      const movie = mediaData.find(item => item.id == id);
      if (movie) {
        playVideo(movie.name, movie.videoUrl, 'Movie');
      }
    }
    
    // Play video
    function playVideo(title, url, type) {
      videoTitle.textContent = title;
      videoPlayer.src = url;
      videoPlayer.load();
      
      // Reset controls
      progressBar.style.width = '0%';
      timeDisplay.textContent = '00:00 / 00:00';
      volumeSlider.value = videoPlayer.volume;
      
      videoModal.classList.add('active');
      
      // Enter fullscreen and play video
      videoModalContent.requestFullscreen().then(() => {
        videoPlayer.play().catch(error => {
            console.log('Autoplay prevented:', error);
        });
      }).catch(err => {
        console.error('Error attempting to enable fullscreen:', err);
      });
    }
    
    // Open series modal
    function openSeriesModal(id) {
      const series = mediaData.find(item => item.id == id);
      
      if (series) {
        currentSeries = series;
        renderSeriesModal(series);
        seriesModal.classList.add('active');
      }
    }
    
    // Render series modal content
    function renderSeriesModal(series) {
      seriesTitle.textContent = series.name;
      seriesPoster.src = series.thumbnail;
      seriesDescription.textContent = series.description || 'No description available.';
      
      const totalEpisodes = series.seasons.reduce((sum, season) => sum + season.episodes.length, 0);
      seriesSeasons.textContent = `${series.seasons.length} Season${series.seasons.length !== 1 ? 's' : ''}`;
      seriesEpisodes.textContent = `${totalEpisodes} Episode${totalEpisodes !== 1 ? 's' : ''}`;
      
      // Render seasons sidebar
      seasonsSidebar.innerHTML = '';
      series.seasons.forEach(season => {
        const seasonEl = document.createElement('div');
        seasonEl.className = 'season-item';
        if (season.seasonNumber === (currentSeason?.seasonNumber || series.seasons[0].seasonNumber)) {
          seasonEl.classList.add('active');
        }
        seasonEl.innerHTML = `
          <div class="season-title">Season ${season.seasonNumber}</div>
          <div class="season-episodes">${season.episodes.length} episodes</div>
        `;
        seasonEl.addEventListener('click', () => {
          document.querySelectorAll('.season-item').forEach(item => item.classList.remove('active'));
          seasonEl.classList.add('active');
          currentSeason = season;
          renderEpisodesList(season);
        });
        seasonsSidebar.appendChild(seasonEl);
      });
      
      // Render episodes for the first season (or current season if set)
      const seasonToShow = currentSeason || series.seasons[0];
      currentSeason = seasonToShow;
      renderEpisodesList(seasonToShow);
    }
    
    // Render episodes list
    function renderEpisodesList(season) {
      episodesList.innerHTML = '';
      
      season.episodes.forEach(episode => {
        const episodeEl = document.createElement('div');
        episodeEl.className = 'episode-card';
        episodeEl.innerHTML = `
            <div class="episode-thumbnail">
                <img src="${episode.thumbnail || currentSeries.thumbnail}" alt="${episode.title}">
                <button class="play-episode">
                    <i class="fas fa-play"></i>
                </button>
            </div>
            <div class="episode-info">
                <h3 class="episode-title">${episode.title}</h3>
                <span class="episode-number">S${season.seasonNumber}E${episode.episodeNumber}</span>
                <p class="episode-description">No description available.</p>
            </div>
        `;
        
        const playButton = episodeEl.querySelector('.play-episode');
        playButton.addEventListener('click', (e) => {
          e.stopPropagation();
          playEpisode(episode, season.seasonNumber, currentSeries.name);
        });
        
        episodeEl.addEventListener('click', () => {
          playEpisode(episode, season.seasonNumber, currentSeries.name);
        });
        
        episodesList.appendChild(episodeEl);
      });
    }
    
    // Play episode
    function playEpisode(episode, seasonNumber, seriesName) {
      const title = `${seriesName} - S${seasonNumber}E${episode.episodeNumber}: ${episode.title}`;
      playVideo(title, episode.videoUrl, 'TV Episode');
    }

    // Mock data generator for demonstration
    function generateMockData(query) {
      const numItems = Math.floor(Math.random() * 10) + 5;
      const media = [];
      for (let i = 0; i < numItems; i++) {
        const type = Math.random() > 0.5 ? 'movie' : 'series';
        const name = `${query} - Item ${i+1}`;
        const thumbnail = `https://placehold.co/400x600/6c5ce7/ffffff?text=${encodeURIComponent(name.slice(0, 15))}`;
        const videoUrl = getDummyVideoUrl();
        
        if (type === 'movie') {
          media.push({
            id: `movie-${i}`,
            name,
            thumbnail,
            videoUrl,
            description: `This is a great movie about ${query}.`
          });
        } else {
          const numSeasons = Math.floor(Math.random() * 3) + 1;
          const seasons = [];
          for (let s = 1; s <= numSeasons; s++) {
            const numEpisodes = Math.floor(Math.random() * 8) + 4;
            const episodes = [];
            for (let e = 1; e <= numEpisodes; e++) {
              episodes.push({
                id: `series-${i}-s${s}-e${e}`,
                title: `${name} - Episode ${e}`,
                episodeNumber: e,
                thumbnail: `https://placehold.co/1280x720/00cec9/16213e?text=S${s}E${e}`,
                videoUrl: getDummyVideoUrl(),
                description: `Summary of episode ${e}.`
              });
            }
            seasons.push({ seasonNumber: s, episodes });
          }
          media.push({
            id: `series-${i}`,
            name,
            thumbnail,
            description: `This is an amazing series about ${query}.`,
            seasons
          });
        }
      }
      return media;
    }
    
    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>

